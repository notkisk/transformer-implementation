FROM python:3.12-slim\n\nENV PYTHONDONTWRITEBYTECODE=1 \n    PYTHONUNBUFFERED=1\n\nWORKDIR /app\n\nRUN apt-get update \n  && apt-get install -y --no-install-recommends \n       build-essential \n       gcc \n       libssl-dev \n       libffi-dev \n       libpq-dev \n       curl \n       git \n       rustc \n       cargo \n  && rm -rf /var/lib/apt/lists/*\n\nRUN pip install --no-cache-dir --upgrade pip setuptools wheel build\n\nCOPY . /app\n\n# Install dependencies from pyproject.toml\nRUN pip install --no-cache-dir .\n\nRUN useradd --create-home appuser && chown -R appuser:appuser /app\nUSER appuser\n\nCMD [\"python\"]\n